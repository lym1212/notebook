## 单线程

- JavaScript 同时只能执行一个任务
- JavaScript 引擎有多个线程，单个脚本只能在一个（主）线程上运行

## 同步和异步

- 同步任务：没有被引擎挂起、在主线程上排队执行的任务
- 异步任务：被引擎放在一边，不进入主线程而进入任务队列的任务

## 任务队列和事件循环

- 任务队列：各种需要当前程序处理的异步任务（可以存在多个任务队列）
- 同步任务全部执行完后，满足条件的异步任务重新进入主线程开始执行，变成同步任务，任务队列清空程序就结束执行
- 异步任务重新进入主线程就会执行对应的回调函数，没有回调函数的异步任务不会进入任务队列（不会重新进入主线程）
- 事件循环：同步任务执行完了，引擎就会去检查挂起的异步任务是否可以进入主线程

## 异步操作模式

#### 回调函数

- 优点：简单且容易实现
- 缺点：不利于阅读和维护，高度耦合；多个回调函数嵌套时会使程序结构混乱；每个任务只能指定一个毁掉函数

#### 事件监听

- 给函数1绑定一个事件，函数2作为事件发生时触发的回调函数
- 优点：可以绑定多个事件，每个事件可以指定多个回调函数；可以去耦合，有利于实现模块化
- 缺点：运行流程不清晰

#### 发布/订阅模式（观察者模式）

- 某个任务执行完成，向信号中心发布一个信号，订阅了这个信号的其他任务就会知道什么时候开始执行
- 可以查看存在多少信号、每个信号多少订阅，类似于事件监听但优于事件监听

## 异步操作流程控制

- 串行执行：依次执行异步任务，耗时太多
- 并行执行：所有异步任务同时执行（ forEach 方法），任务较多时消耗资源较多

- 串行并行结合：每次最多只能并行执行不超过 n 个异步任务
